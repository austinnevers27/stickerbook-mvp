<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stickerbook â€“ Creator Account</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/stickerbook.css">
  <style>
    /* ========== PAGE-SPECIFIC STYLES ========== */
    
    /* Purple accent overrides for creator flow */
    .creator-flow .field-label {
      color: var(--color-purple);
    }

    .creator-flow .field-input:focus {
      border-color: var(--color-purple);
      box-shadow: 0 0 0 3px rgba(109, 40, 217, 0.15);
    }

    .creator-flow .terms-row a {
      color: var(--color-purple);
    }

    .creator-flow .terms-row a:hover {
      color: var(--color-purple-dark);
    }

    .creator-flow .password-rule.met {
      color: var(--color-purple);
    }

    /* Section dividers */
    .section-divider {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 24px 0 16px;
    }

    .section-divider-label {
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--color-purple);
      white-space: nowrap;
    }

    .section-divider-line {
      flex: 1;
      height: 1px;
      background: var(--color-border);
    }

    /* Profile photo upload */
    .profile-upload {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
    }

    .profile-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: var(--color-canvas-subtle);
      border: 2px dashed var(--color-border);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      cursor: pointer;
      transition: border-color 0.15s ease;
    }

    .profile-preview:hover {
      border-color: var(--color-purple);
    }

    .profile-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .profile-preview-placeholder {
      font-size: 32px;
      color: var(--color-text-muted);
    }

    .profile-upload-btn {
      font-size: 12px;
      font-weight: 600;
      color: var(--color-purple);
      background: none;
      border: none;
      cursor: pointer;
      font-family: var(--font-primary);
    }

    .profile-upload-btn:hover {
      color: var(--color-purple-dark);
    }

    #profile-input {
      display: none;
    }

    .profile-hint {
      font-size: 10px;
      color: var(--color-text-subtle);
      text-align: center;
    }

    /* Bio textarea */
    .field-textarea {
      border-radius: var(--radius-md);
      min-height: 80px;
      resize: vertical;
      line-height: 1.5;
    }

    .field-char-count {
      font-size: 10px;
      color: var(--color-text-subtle);
      text-align: right;
      margin-top: 4px;
    }

    /* Art style pills */
    .pills-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }

    .pill {
      padding: 8px 14px;
      background: var(--color-canvas);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-pill);
      font-size: 11px;
      font-weight: 600;
      color: var(--color-text-secondary);
      cursor: pointer;
      transition: all 0.15s ease;
      font-family: var(--font-primary);
    }

    .pill:hover {
      border-color: var(--color-purple);
      color: var(--color-purple);
    }

    .pill.selected {
      background: var(--color-purple);
      border-color: var(--color-purple);
      color: white;
    }

    .pills-hint {
      font-size: 10px;
      color: var(--color-text-subtle);
      margin-top: 8px;
    }

    /* Legal name row */
    .legal-name-row {
      display: grid;
      grid-template-columns: 1fr 50px 1fr;
      gap: 8px;
    }

    .legal-name-row-suffix {
      display: grid;
      grid-template-columns: 1fr 90px;
      gap: 8px;
      margin-top: 8px;
    }

    .field-input--mi {
      text-align: center;
      text-transform: uppercase;
    }

    .field-select {
      border-radius: var(--radius-pill);
      border: 1px solid var(--color-border);
      padding: 10px 12px;
      font-size: 13px;
      background: var(--color-canvas);
      color: var(--color-text-primary);
      outline: none;
      font-family: var(--font-primary);
      cursor: pointer;
      transition: border-color 0.15s ease, box-shadow 0.15s ease;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2371717a' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
    }

    .field-select:focus {
      border-color: var(--color-purple);
      box-shadow: 0 0 0 3px rgba(109, 40, 217, 0.15);
    }

    /* Legal name helper (appears on focus) */
    .field-helper-focus {
      font-size: 10px;
      color: var(--color-text-subtle);
      font-style: italic;
      margin-top: 6px;
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      transition: opacity 0.2s ease, max-height 0.2s ease;
    }

    .field-helper-focus.visible {
      opacity: 1;
      max-height: 40px;
    }

    /* Address rows */
    .address-row {
      margin-bottom: 8px;
    }

    .address-row-split {
      display: grid;
      grid-template-columns: 1fr 60px 80px;
      gap: 8px;
    }

    .field-input--state {
      text-align: center;
      text-transform: uppercase;
    }

    .field-input--zip {
      text-align: center;
    }

    /* Minor-specific styles */
    .minor-fields {
      transition: opacity 0.3s ease, max-height 0.3s ease;
    }

    .minor-fields.hidden {
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }

    .minor-note {
      background: rgba(109, 40, 217, 0.06);
      border-radius: var(--radius-md);
      padding: 12px 14px;
      margin-bottom: 16px;
    }

    .minor-note p {
      font-size: 11px;
      line-height: 1.5;
      color: var(--color-text-secondary);
      margin: 0;
    }

    .parent-checkbox-row {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 16px;
    }

    .parent-checkbox-row input[type="checkbox"] {
      margin-top: 2px;
      flex-shrink: 0;
      accent-color: var(--color-purple);
    }

    .parent-checkbox-row label {
      font-size: 12px;
      line-height: 1.4;
      color: var(--color-text-secondary);
    }

    /* Adult fields */
    .adult-fields {
      transition: opacity 0.3s ease, max-height 0.3s ease;
    }

    .adult-fields.hidden {
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }

    /* Terms checkbox purple accent */
    .creator-flow .terms-row input[type="checkbox"] {
      accent-color: var(--color-purple);
    }
  </style>
</head>
<body>
  <div class="app-shell creator-flow">
    <div class="phone-frame">
      <div class="phone-inner">
        <div class="shell-inner">
          
          <!-- Header -->
          <div class="top-row">
            <div class="logo-group" style="align-items: flex-start;">
              <div class="logo-mark">STICKERBOOK</div>
              <div class="logo-accent"></div>
            </div>
            <button class="btn-skip" onclick="window.location.href='index.html'">Back</button>
          </div>

          <!-- Title -->
          <h1 class="screen-title text-center">Become a Creator</h1>
          <p class="screen-subtitle text-center">Share your art in the Sticker Shop</p>

          <!-- Form -->
          <form class="form" id="creator-form" novalidate>
            
            <!-- ========== SECTION 1: ARTIST IDENTITY ========== -->
            <div class="section-divider">
              <span class="section-divider-label">Your Artist Identity</span>
              <span class="section-divider-line"></span>
            </div>

            <!-- Profile Photo -->
            <div class="profile-upload">
              <div class="profile-preview" id="profile-preview">
                <span class="profile-preview-placeholder">ðŸ“·</span>
              </div>
              <button type="button" class="profile-upload-btn" id="profile-upload-btn">Upload profile photo</button>
              <input type="file" id="profile-input" accept="image/*" />
              <p class="profile-hint">Photo or logo â€¢ Required</p>
            </div>
            <div class="field-error text-center" id="profile-error"></div>

            <!-- Artist Name -->
            <div class="field">
              <label class="field-label" for="display-name">Artist / Display Name</label>
              <input 
                type="text" 
                id="display-name" 
                class="field-input" 
                placeholder="How should we show your name?"
                maxlength="30"
                autocomplete="nickname"
                required
              />
              <div class="field-error" id="display-name-error"></div>
            </div>

            <!-- Date of Birth -->
            <div class="field">
              <label class="field-label">Date of Birth</label>
              <div class="dob-row">
                <input 
                  type="text" 
                  id="dob-month" 
                  class="field-input" 
                  placeholder="MM"
                  maxlength="2"
                  inputmode="numeric"
                  autocomplete="bday-month"
                  required
                />
                <input 
                  type="text" 
                  id="dob-day" 
                  class="field-input" 
                  placeholder="DD"
                  maxlength="2"
                  inputmode="numeric"
                  autocomplete="bday-day"
                  required
                />
                <input 
                  type="text" 
                  id="dob-year" 
                  class="field-input" 
                  placeholder="YYYY"
                  maxlength="4"
                  inputmode="numeric"
                  autocomplete="bday-year"
                  required
                />
              </div>
              <div class="field-error" id="dob-error"></div>
            </div>

            <!-- Bio -->
            <div class="field">
              <label class="field-label" for="bio">Bio</label>
              <textarea 
                id="bio" 
                class="field-input field-textarea" 
                placeholder="Tell people about yourself and your art..."
                maxlength="200"
              ></textarea>
              <div class="field-char-count"><span id="bio-count">0</span>/200</div>
              <div class="field-error" id="bio-error"></div>
            </div>

            <!-- Art Style -->
            <div class="field">
              <label class="field-label">Art Style</label>
              <div class="pills-container" id="style-pills">
                <div class="pill" data-value="Cartoon / Illustrated">Cartoon / Illustrated</div>
                <div class="pill" data-value="Minimalist / Clean">Minimalist / Clean</div>
                <div class="pill" data-value="Hand-drawn / Sketchy">Hand-drawn / Sketchy</div>
                <div class="pill" data-value="Kawaii / Cute">Kawaii / Cute</div>
                <div class="pill" data-value="Retro / Vintage">Retro / Vintage</div>
                <div class="pill" data-value="Realistic">Realistic</div>
                <div class="pill" data-value="Abstract / Artistic">Abstract / Artistic</div>
                <div class="pill" data-value="Bold / Graphic">Bold / Graphic</div>
              </div>
              <p class="pills-hint">Select all that apply</p>
              <div class="field-error" id="style-error"></div>
            </div>

            <!-- ========== SECTION 2: ACCOUNT & LEGAL ========== -->
            <div class="section-divider">
              <span class="section-divider-label">Account & Legal</span>
              <span class="section-divider-line"></span>
            </div>

            <!-- Email -->
            <div class="field">
              <label class="field-label" for="email">Email</label>
              <input 
                type="email" 
                id="email" 
                class="field-input" 
                placeholder="you@example.com"
                autocomplete="email"
                required
              />
              <div class="field-error" id="email-error"></div>
            </div>

            <!-- Password -->
            <div class="field">
              <label class="field-label" for="password">Password</label>
              <input 
                type="password" 
                id="password" 
                class="field-input" 
                placeholder="Create a password"
                autocomplete="new-password"
                required
              />
              <div class="password-rules">
                <div class="password-rule" id="rule-length">At least 8 characters</div>
                <div class="password-rule" id="rule-upper">One uppercase letter</div>
                <div class="password-rule" id="rule-lower">One lowercase letter</div>
                <div class="password-rule" id="rule-number">One number</div>
              </div>
              <div class="field-error" id="password-error"></div>
            </div>

            <!-- Minor-only fields -->
            <div class="minor-fields hidden" id="minorFields">
              <div class="minor-note">
                <p>Creators under 18 can share stickers at no cost to users. Once you turn 18, you can set prices and start earning.</p>
              </div>
              <div class="parent-checkbox-row">
                <input type="checkbox" id="parent-consent" />
                <label for="parent-consent">My parent or guardian knows I'm creating this account</label>
              </div>
              <div class="field-error" id="parent-error"></div>
            </div>

            <!-- Adult-only fields -->
            <div class="adult-fields" id="adultFields">
              
              <!-- Legal Name -->
              <div class="field" id="legal-name-field">
                <label class="field-label">Legal Name</label>
                <div class="legal-name-row">
                  <input 
                    type="text" 
                    id="legal-first" 
                    class="field-input" 
                    placeholder="First"
                    autocomplete="given-name"
                  />
                  <input 
                    type="text" 
                    id="legal-mi" 
                    class="field-input field-input--mi" 
                    placeholder="MI"
                    maxlength="1"
                    autocomplete="additional-name"
                  />
                  <input 
                    type="text" 
                    id="legal-last" 
                    class="field-input" 
                    placeholder="Last"
                    autocomplete="family-name"
                  />
                </div>
                <div class="legal-name-row-suffix">
                  <div></div>
                  <select id="legal-suffix" class="field-select">
                    <option value="">Suffix</option>
                    <option value="Jr.">Jr.</option>
                    <option value="Sr.">Sr.</option>
                    <option value="II">II</option>
                    <option value="III">III</option>
                    <option value="IV">IV</option>
                  </select>
                </div>
                <p class="field-helper-focus" id="legal-name-helper">For payouts and tax reporting â€” never shown publicly</p>
                <div class="field-error" id="legal-name-error"></div>
              </div>

              <!-- Address -->
              <div class="field">
                <label class="field-label">Address</label>
                <div class="address-row">
                  <input 
                    type="text" 
                    id="street" 
                    class="field-input" 
                    placeholder="Street address"
                    autocomplete="address-line1"
                  />
                </div>
                <div class="address-row">
                  <input 
                    type="text" 
                    id="apt" 
                    class="field-input" 
                    placeholder="Apt, suite, unit (optional)"
                    autocomplete="address-line2"
                  />
                </div>
                <div class="address-row-split">
                  <input 
                    type="text" 
                    id="city" 
                    class="field-input" 
                    placeholder="City"
                    autocomplete="address-level2"
                  />
                  <input 
                    type="text" 
                    id="state" 
                    class="field-input field-input--state" 
                    placeholder="ST"
                    maxlength="2"
                    autocomplete="address-level1"
                  />
                  <input 
                    type="text" 
                    id="zip" 
                    class="field-input field-input--zip" 
                    placeholder="ZIP"
                    maxlength="5"
                    inputmode="numeric"
                    autocomplete="postal-code"
                  />
                </div>
                <div class="field-error" id="address-error"></div>
              </div>
            </div>

            <!-- Terms -->
            <div class="terms-row">
              <input type="checkbox" id="terms" required />
              <label for="terms">
                I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
              </label>
            </div>
            <div class="field-error" id="terms-error"></div>

            <!-- Submit -->
            <div class="cta-row">
              <button type="submit" class="btn btn-primary" id="submit-btn">
                Become a Creator
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ============ DOM ELEMENTS ============
    const form = document.getElementById('creator-form');
    
    // Profile
    const profilePreview = document.getElementById('profile-preview');
    const profileInput = document.getElementById('profile-input');
    const profileUploadBtn = document.getElementById('profile-upload-btn');
    const profileError = document.getElementById('profile-error');
    
    // Artist identity
    const displayNameInput = document.getElementById('display-name');
    const dobMonth = document.getElementById('dob-month');
    const dobDay = document.getElementById('dob-day');
    const dobYear = document.getElementById('dob-year');
    const bioInput = document.getElementById('bio');
    const bioCount = document.getElementById('bio-count');
    const stylePills = document.getElementById('style-pills');
    
    // Account
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    
    // Legal (adult)
    const legalFirst = document.getElementById('legal-first');
    const legalMi = document.getElementById('legal-mi');
    const legalLast = document.getElementById('legal-last');
    const legalSuffix = document.getElementById('legal-suffix');
    const legalNameHelper = document.getElementById('legal-name-helper');
    const streetInput = document.getElementById('street');
    const aptInput = document.getElementById('apt');
    const cityInput = document.getElementById('city');
    const stateInput = document.getElementById('state');
    const zipInput = document.getElementById('zip');
    
    // Minor
    const parentConsentCheckbox = document.getElementById('parent-consent');
    
    // Terms
    const termsCheckbox = document.getElementById('terms');
    
    // Containers
    const adultFields = document.getElementById('adultFields');
    const minorFields = document.getElementById('minorFields');
    
    // Error elements
    const displayNameError = document.getElementById('display-name-error');
    const dobError = document.getElementById('dob-error');
    const bioError = document.getElementById('bio-error');
    const styleError = document.getElementById('style-error');
    const emailError = document.getElementById('email-error');
    const passwordError = document.getElementById('password-error');
    const legalNameError = document.getElementById('legal-name-error');
    const addressError = document.getElementById('address-error');
    const parentError = document.getElementById('parent-error');
    const termsError = document.getElementById('terms-error');
    
    // Password rules
    const ruleLength = document.getElementById('rule-length');
    const ruleUpper = document.getElementById('rule-upper');
    const ruleLower = document.getElementById('rule-lower');
    const ruleNumber = document.getElementById('rule-number');

    // ============ STATE ============
    let profileImage = null;
    let selectedStyles = new Set();
    let isMinor = false;

    // ============ PROFILE PHOTO ============
    profilePreview.addEventListener('click', () => profileInput.click());
    profileUploadBtn.addEventListener('click', () => profileInput.click());

    profileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        profileImage = file;
        const reader = new FileReader();
        reader.onload = (e) => {
          profilePreview.innerHTML = `<img src="${e.target.result}" alt="Profile" />`;
          profileUploadBtn.textContent = 'Change photo';
        };
        reader.readAsDataURL(file);
        profileError.textContent = '';
      }
    });

    // ============ BIO CHARACTER COUNT ============
    bioInput.addEventListener('input', () => {
      bioCount.textContent = bioInput.value.length;
    });

    // ============ ART STYLE PILLS ============
    stylePills.addEventListener('click', (e) => {
      const pill = e.target.closest('.pill');
      if (!pill) return;

      const value = pill.dataset.value;

      if (selectedStyles.has(value)) {
        selectedStyles.delete(value);
        pill.classList.remove('selected');
      } else {
        selectedStyles.add(value);
        pill.classList.add('selected');
      }
      styleError.textContent = '';
    });

    // ============ DOB AUTO-TAB & AGE CHECK ============
    function calculateAge(month, day, year) {
      const today = new Date();
      const birthDate = new Date(year, month - 1, day);
      let age = today.getFullYear() - birthDate.getFullYear();
      const monthDiff = today.getMonth() - birthDate.getMonth();
      
      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }
      
      return age;
    }

    function checkAgeAndToggleForm() {
      const m = parseInt(dobMonth.value, 10);
      const d = parseInt(dobDay.value, 10);
      const y = parseInt(dobYear.value, 10);

      if (isNaN(m) || isNaN(d) || isNaN(y) || dobYear.value.length < 4) {
        return;
      }

      if (m < 1 || m > 12 || d < 1 || d > 31 || y < 1900 || y > new Date().getFullYear()) {
        return;
      }

      const age = calculateAge(m, d, y);
      
      if (age < 18) {
        isMinor = true;
        adultFields.classList.add('hidden');
        minorFields.classList.remove('hidden');
      } else {
        isMinor = false;
        adultFields.classList.remove('hidden');
        minorFields.classList.add('hidden');
      }
    }

    function autoTab(current, next, maxLength) {
      current.addEventListener('input', (e) => {
        e.target.value = e.target.value.replace(/\D/g, '');
        
        if (e.target.value.length >= maxLength && next) {
          next.focus();
        }

        if (current === dobYear && e.target.value.length === 4) {
          checkAgeAndToggleForm();
        }
      });
    }

    autoTab(dobMonth, dobDay, 2);
    autoTab(dobDay, dobYear, 2);
    autoTab(dobYear, null, 4);

    dobMonth.addEventListener('blur', checkAgeAndToggleForm);
    dobDay.addEventListener('blur', checkAgeAndToggleForm);
    dobYear.addEventListener('blur', checkAgeAndToggleForm);

    // ============ LEGAL NAME HELPER (SHOW ON FOCUS) ============
    const legalNameInputs = [legalFirst, legalMi, legalLast, legalSuffix];
    
    legalNameInputs.forEach(input => {
      input.addEventListener('focus', () => {
        legalNameHelper.classList.add('visible');
      });
      input.addEventListener('blur', (e) => {
        // Delay to check if focus moved to another legal name field
        setTimeout(() => {
          const activeEl = document.activeElement;
          if (!legalNameInputs.includes(activeEl)) {
            legalNameHelper.classList.remove('visible');
          }
        }, 100);
      });
    });

    // ============ FORMAT HELPERS ============
    legalMi.addEventListener('input', (e) => {
      e.target.value = e.target.value.toUpperCase().replace(/[^A-Z]/g, '');
    });

    stateInput.addEventListener('input', (e) => {
      e.target.value = e.target.value.toUpperCase().replace(/[^A-Z]/g, '');
    });

    zipInput.addEventListener('input', (e) => {
      e.target.value = e.target.value.replace(/\D/g, '');
    });

    // ============ PASSWORD LIVE VALIDATION ============
    passwordInput.addEventListener('input', () => {
      const val = passwordInput.value;
      
      ruleLength.classList.toggle('met', val.length >= 8);
      ruleUpper.classList.toggle('met', /[A-Z]/.test(val));
      ruleLower.classList.toggle('met', /[a-z]/.test(val));
      ruleNumber.classList.toggle('met', /[0-9]/.test(val));
    });

    // ============ CLEAR ERRORS ON INPUT ============
    displayNameInput.addEventListener('input', () => { displayNameError.textContent = ''; });
    dobMonth.addEventListener('input', () => { dobError.textContent = ''; });
    dobDay.addEventListener('input', () => { dobError.textContent = ''; });
    dobYear.addEventListener('input', () => { dobError.textContent = ''; });
    bioInput.addEventListener('input', () => { bioError.textContent = ''; });
    emailInput.addEventListener('input', () => { emailError.textContent = ''; });
    passwordInput.addEventListener('input', () => { passwordError.textContent = ''; });
    legalFirst.addEventListener('input', () => { legalNameError.textContent = ''; });
    legalLast.addEventListener('input', () => { legalNameError.textContent = ''; });
    streetInput.addEventListener('input', () => { addressError.textContent = ''; });
    cityInput.addEventListener('input', () => { addressError.textContent = ''; });
    stateInput.addEventListener('input', () => { addressError.textContent = ''; });
    zipInput.addEventListener('input', () => { addressError.textContent = ''; });
    parentConsentCheckbox.addEventListener('change', () => { parentError.textContent = ''; });
    termsCheckbox.addEventListener('change', () => { termsError.textContent = ''; });

    // ============ VALIDATION HELPERS ============
    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function isValidPassword(password) {
      return (
        password.length >= 8 &&
        /[A-Z]/.test(password) &&
        /[a-z]/.test(password) &&
        /[0-9]/.test(password)
      );
    }

    function isValidDOB(month, day, year) {
      const m = parseInt(month, 10);
      const d = parseInt(day, 10);
      const y = parseInt(year, 10);
      
      if (isNaN(m) || isNaN(d) || isNaN(y)) return { valid: false, reason: 'incomplete' };
      if (m < 1 || m > 12) return { valid: false, reason: 'invalid' };
      if (d < 1 || d > 31) return { valid: false, reason: 'invalid' };
      if (y < 1900 || y > new Date().getFullYear()) return { valid: false, reason: 'invalid' };
      
      const testDate = new Date(y, m - 1, d);
      if (testDate.getMonth() !== m - 1) return { valid: false, reason: 'invalid' };
      
      const age = calculateAge(m, d, y);
      if (age < 13) return { valid: false, reason: 'underage' };
      
      return { valid: true, age: age };
    }

    // ============ FORM SUBMISSION ============
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      
      let hasError = false;

      // Validate profile photo
      if (!profileImage) {
        profileError.textContent = 'Please upload a profile photo or logo.';
        hasError = true;
      }
      
      // Validate display name
      if (!displayNameInput.value.trim()) {
        displayNameError.textContent = 'Please enter your artist name.';
        hasError = true;
      }

      // Validate DOB
      const dobResult = isValidDOB(dobMonth.value, dobDay.value, dobYear.value);
      if (!dobResult.valid) {
        if (dobResult.reason === 'incomplete') {
          dobError.textContent = 'Please enter your complete date of birth.';
        } else if (dobResult.reason === 'underage') {
          dobError.textContent = 'You must be at least 13 years old to use Stickerbook.';
        } else {
          dobError.textContent = 'Please enter a valid date of birth.';
        }
        hasError = true;
      }

      // Validate at least one style selected
      if (selectedStyles.size === 0) {
        styleError.textContent = 'Please select at least one art style.';
        hasError = true;
      }
      
      // Validate email
      if (!emailInput.value.trim()) {
        emailError.textContent = 'Please enter your email address.';
        hasError = true;
      } else if (!isValidEmail(emailInput.value)) {
        emailError.textContent = 'Please enter a valid email address.';
        hasError = true;
      }
      
      // Validate password
      if (!passwordInput.value) {
        passwordError.textContent = 'Please create a password.';
        hasError = true;
      } else if (!isValidPassword(passwordInput.value)) {
        passwordError.textContent = 'Password doesn\'t meet all requirements.';
        hasError = true;
      }

      // Minor-specific validation
      if (isMinor) {
        if (!parentConsentCheckbox.checked) {
          parentError.textContent = 'Please confirm your parent or guardian knows about this account.';
          hasError = true;
        }
      }

      // Adult-specific validation
      if (!isMinor) {
        // Legal name
        if (!legalFirst.value.trim() || !legalLast.value.trim()) {
          legalNameError.textContent = 'Please enter your first and last name.';
          hasError = true;
        }

        // Address
        if (!streetInput.value.trim() || !cityInput.value.trim() || !stateInput.value.trim() || !zipInput.value.trim()) {
          addressError.textContent = 'Please enter your complete address.';
          hasError = true;
        } else if (zipInput.value.length !== 5) {
          addressError.textContent = 'Please enter a valid 5-digit ZIP code.';
          hasError = true;
        } else if (stateInput.value.length !== 2) {
          addressError.textContent = 'Please enter a valid 2-letter state code.';
          hasError = true;
        }
      }
      
      // Validate terms
      if (!termsCheckbox.checked) {
        termsError.textContent = 'You must agree to the terms to continue.';
        hasError = true;
      }
      
      if (hasError) return;
      
      // ============ SAVE DATA ============
      const creatorData = {
        type: 'creator',
        isMinor: isMinor,
        displayName: displayNameInput.value.trim(),
        dob: {
          month: dobMonth.value,
          day: dobDay.value,
          year: dobYear.value
        },
        bio: bioInput.value.trim(),
        styles: Array.from(selectedStyles),
        email: emailInput.value.trim()
      };

      // Add adult-only fields
      if (!isMinor) {
        creatorData.legalName = {
          first: legalFirst.value.trim(),
          mi: legalMi.value.trim().toUpperCase(),
          last: legalLast.value.trim(),
          suffix: legalSuffix.value
        };
        creatorData.address = {
          street: streetInput.value.trim(),
          apt: aptInput.value.trim(),
          city: cityInput.value.trim(),
          state: stateInput.value.trim().toUpperCase(),
          zip: zipInput.value.trim()
        };
      }
      
      localStorage.setItem('stickerbook_creator', JSON.stringify(creatorData));
      localStorage.setItem('stickerbook_user_name', creatorData.displayName);
      localStorage.setItem('stickerbook_is_minor', isMinor.toString());
      
      // Navigate to creator studio
      window.location.href = 'creatorstudio.html';
    });
  </script>
</body>
</html>