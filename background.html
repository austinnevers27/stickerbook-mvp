<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stickerbook – Pick Your Background</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/stickerbook.css">
</head>
<body>
  <div class="app-shell">
    <div class="phone-frame">
      <div class="phone-inner">
        <div class="shell-inner">
          <!-- Logo only, centered -->
          <div class="top-row top-row--centered">
            <div class="logo-group" style="align-items: center;">
              <div class="logo-mark">STICKERBOOK</div>
              <div class="logo-accent"></div>
            </div>
          </div>

          <h1 class="screen-title text-center">Pick your background</h1>
          <p class="screen-subtitle text-center">
            Set the vibe for this page. You can change it later.
          </p>

          <!-- Background picker -->
          <div class="background-section">
            <div class="background-label">Backgrounds</div>
            <div class="background-grid-wrapper">
              <div class="background-grid" id="background-grid">
                <!-- Row 1 – Neutrals -->
                <div class="bg-tile" data-color="#ffffff">
                  <div class="bg-tile-inner" style="background-color: #ffffff;"></div>
                  <div class="bg-label">White</div>
                </div>

                <div class="bg-tile" data-color="#e5e7eb">
                  <div class="bg-tile-inner" style="background-color: #e5e7eb;"></div>
                  <div class="bg-label">Light Gray</div>
                </div>

                <div class="bg-tile" data-color="#fef3c7">
                  <div class="bg-tile-inner" style="background-color: #fef3c7;"></div>
                  <div class="bg-label">Cream</div>
                </div>

                <!-- Row 2 – Dark / dramatic -->
                <div class="bg-tile" data-color="#020617">
                  <div class="bg-tile-inner" style="background-color: #020617;"></div>
                  <div class="bg-label">Black</div>
                </div>

                <div class="bg-tile" data-color="#1d4ed8">
                  <div class="bg-tile-inner" style="background-color: #1d4ed8;"></div>
                  <div class="bg-label">Dark Blue</div>
                </div>

                <div class="bg-tile" data-color="#92400e">
                  <div class="bg-tile-inner" style="background-color: #92400e;"></div>
                  <div class="bg-label">Brown</div>
                </div>

                <!-- Row 3 – Warm -->
                <div class="bg-tile" data-color="#ef4444">
                  <div class="bg-tile-inner" style="background-color: #ef4444;"></div>
                  <div class="bg-label">Red</div>
                </div>

                <div class="bg-tile" data-color="#fb923c">
                  <div class="bg-tile-inner" style="background-color: #fb923c;"></div>
                  <div class="bg-label">Orange</div>
                </div>

                <div class="bg-tile" data-color="#facc15">
                  <div class="bg-tile-inner" style="background-color: #facc15;"></div>
                  <div class="bg-label">Yellow</div>
                </div>

                <!-- Row 4 – Cool -->
                <div class="bg-tile" data-color="#22c55e">
                  <div class="bg-tile-inner" style="background-color: #22c55e;"></div>
                  <div class="bg-label">Green</div>
                </div>

                <div class="bg-tile" data-color="#0ea5e9">
                  <div class="bg-tile-inner" style="background-color: #0ea5e9;"></div>
                  <div class="bg-label">Blue</div>
                </div>

                <div class="bg-tile" data-color="#a855f7">
                  <div class="bg-tile-inner" style="background-color: #a855f7;"></div>
                  <div class="bg-label">Purple</div>
                </div>
              </div>
            </div>
          </div>

          <!-- CTA -->
          <div class="cta-row">
            <button id="choose-stickers-btn" class="btn btn-primary" type="button" disabled>
              Choose stickers
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const tiles = document.querySelectorAll('.bg-tile');
      const chooseBtn = document.getElementById('choose-stickers-btn');

      const savedColor =
        localStorage.getItem('stickerbook_page_1_background') ||
        localStorage.getItem('current_page_background') ||
        '';

      let selectedColor = null;

      function applyColor(color) {
        selectedColor = color;

        tiles.forEach(tile => {
          const tileColor = tile.getAttribute('data-color');
          if (tileColor === color) {
            tile.classList.add('selected');
          } else {
            tile.classList.remove('selected');
          }
        });
      }

      tiles.forEach(tile => {
        tile.addEventListener('click', function () {
          const color = this.getAttribute('data-color');
          applyColor(color);
          chooseBtn.disabled = false;
        });
      });

      if (savedColor) {
        const hasMatchingTile = Array.from(tiles).some(
          tile => tile.getAttribute('data-color') === savedColor
        );
        if (hasMatchingTile) {
          applyColor(savedColor);
          chooseBtn.disabled = false;
        }
      }

      chooseBtn.addEventListener('click', function () {
        if (!selectedColor) return;

        localStorage.setItem('current_page_index', '1');
        localStorage.setItem('current_page_background', selectedColor);
        localStorage.setItem('stickerbook_page_1_background', selectedColor);

        window.location.href = 'sticker-selection.html';
      });
    })();
  </script>
</body>
</html>